<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Webcam WebAR</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <!-- AR.js -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
        body { margin: 0; overflow: hidden; }
        #loading {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            z-index: 50;
        }
    </style>

    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const loading = document.getElementById("loading");

            // When AR.js camera is ready
            window.addEventListener("arjs-video-loaded", () => {
                loading.style.display = "none";
            });

            // If camera error
            window.addEventListener("arjs-video-error", () => {
                loading.innerHTML =
                    "Camera Error!<br>Please use HTTPS and allow camera access.";
            });

            // Safety timeout
            setTimeout(() => {
                if (loading.style.display !== "none") {
                    loading.innerHTML =
                        "Still loading...<br>Check camera permission & HTTPS.";
                }
            }, 8000);
        });
    </script>
</head>

<body>

<!-- Loading screen -->
<div id="loading">Starting cameraâ€¦</div>

<!-- A-Frame Scene -->
<a-scene
    embedded
    vr-mode-ui="enabled: false;"
    arjs="sourceType: webcam; debugUIEnabled: false;">

    <!-- Marker -->
    <a-marker type="pattern"
              url="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/patt.hiro">

        <a-box position="0 0.5 0"
               material="color: red"
               rotation="0 45 0"
               animation="property: rotation; to: 0 360 0; loop: true; dur: 4000">
        </a-box>

    </a-marker>

    <a-entity camera></a-entity>
</a-scene>

</body>
</html>
